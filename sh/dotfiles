# config dotfiles

if [ -e $SCRIPT_PATH ]; then

    # change cwd to scripts directory
    cd $SCRIPT_PATH

    mkdir_backup() {
        mkdir "$BACKUP_DIR"
        printf "make directory $CYAN$BACKUP_DIR$NC\n"
    }

    mk_symlink() {
        if [ ! $1 ]
        then
            printf "$RED mk_symlink need a name $NC\n"
        else
            local TARGET=$SCRIPT_PATH/dotfiles/$1
            local LINKTO=$HOME/.$1
            if [ -e "$TARGET" ]
            then
                if [ -e $LINKTO -o -L $LINKTO ]
                then
                    if [ ! -d $BACKUP_DIR ]; then mkdir_backup; fi
                    mv "$LINKTO" "$BACKUP_DIR/"
                    printf "backup $CYAN$LINKTO$NC -> $CYAN$BACKUP_DIR$NC\n"
                fi
                ln -s "$TARGET" "$LINKTO"
                printf "linked $CYAN$TARGET$NC -> $CYAN$LINKTO$NC\n"
            else
                printf "file $RED$TARGET$NC is not exists\n"
            fi
        fi
    }


    for ITEM in config/nvim config/nyaovim eslintrc gitconfig tern-project tmux.conf zshrc bin stylelintrc.json
    do
        mk_symlink $ITEM
    done

fi

# vim:set ft=sh:
